// âœ… Continuing with Perio Chart Integration

import React, { useState } from "react";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { Card } from "@/components/ui/card";
import PerioToothChart from "@/components/charting/PerioToothChart";
import { AutoNoteBox } from "@/components/patients/notes/AutoNoteBox";

export default function PerioChartPanel({ patientId }: { patientId: string }) {
  const [probingData, setProbingData] = useState<Record<string, number[]>>({});
  const [bopData, setBopData] = useState<Record<string, boolean[]>>({});
  const [furcationData, setFurcationData] = useState<Record<string, boolean[]>>({});

  const handleProbingChange = (tooth: string, values: number[]) => {
    setProbingData((prev) => ({ ...prev, [tooth]: values }));
  };

  const handleBOPChange = (tooth: string, values: boolean[]) => {
    setBopData((prev) => ({ ...prev, [tooth]: values }));
  };

  const handleFurcationChange = (tooth: string, values: boolean[]) => {
    setFurcationData((prev) => ({ ...prev, [tooth]: values }));
  };

  return (
    <Tabs defaultValue="perio-chart" className="w-full">
      <TabsList className="mb-4">
        <TabsTrigger value="perio-chart">Perio Chart</TabsTrigger>
        <TabsTrigger value="auto-notes">Notes</TabsTrigger>
      </TabsList>

      <TabsContent value="perio-chart">
        <Card className="p-4">
          <PerioToothChart
            probingData={probingData}
            onProbingChange={handleProbingChange}
            bopData={bopData}
            onBOPChange={handleBOPChange}
            furcationData={furcationData}
            onFurcationChange={handleFurcationChange}
          />
        </Card>
      </TabsContent>

      <TabsContent value="auto-notes">
        <AutoNoteBox
          source="perio"
          chartData={{ probingData, bopData, furcationData }}
          patientId={patientId}
          title="Perio Chart Notes"
        />
      </TabsContent>
    </Tabs>
  );
}